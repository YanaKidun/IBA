-- Шаг 1: Создание основной таблицы
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    phone VARCHAR(15),
    birthday DATE,
    address_line TEXT,
    inn VARCHAR(12),
    snils VARCHAR(11),
    create_date TIMESTAMP NOT NULL
) PARTITION BY RANGE (create_date);

-- Шаг 2: Создание секций для пользователей добавленных в разные временные промежутки
CREATE TABLE users_2023_01 PARTITION OF users FOR VALUES FROM ('2023-01-01') TO ('2023-02-01');
CREATE TABLE users_2023_02 PARTITION OF users FOR VALUES FROM ('2023-02-01') TO ('2023-03-01');
CREATE TABLE users_2023_03 PARTITION OF users FOR VALUES FROM ('2023-03-01') TO ('2023-04-01');
CREATE TABLE users_2023_04 PARTITION OF users FOR VALUES FROM ('2023-04-01') TO ('2023-05-01');
CREATE TABLE users_2023_05 PARTITION OF users FOR VALUES FROM ('2023-05-01') TO ('2023-06-01');

-- Шаг 3: Вставка данных в секции
INSERT INTO users (name, phone, birthday, address_line, inn, snils, create_date)
VALUES
    ('Иван Иванов', '1234567890', '1990-01-01', 'Москва, ул. Ленина, 1', '123456789012', '123-456-789 00', '2023-01-15'),
    ('Петр Петров', '0987654321', '1985-02-02', 'Санкт-Петербург, ул. Пушкина, 2', '987654321012', '987-654-321 00', '2023-01-20'),
    ('Сидор Сидоров', '1112233445', '1992-03-03', 'Екатеринбург, ул. Чехова, 3', '456789012345', '456-789-012 00', '2023-01-25'),
    ('Александр Александров', '2223344556', '1988-04-04', 'Казань, ул. Горького, 4', '321654987012', '321-654-987 00', '2023-01-30'),
    ('Ольга Олегова', '3334455667', '1995-05-05', 'Нижний Новгород, ул. Толстого, 5', '654321098765', '654-321-098 00', '2023-01-31'),
    
    ('Мария Смирнова', '4445566778', '1993-02-10', 'Томск, ул. Лермонтова, 6', '987123456789', '987-123-456 00', '2023-02-05'),
    ('Дмитрий Дмитриев', '5556677889', '1982-02-15', 'Челябинск, ул. Свердлова, 7', '543216789012', '543-216-789 00', '2023-02-20'),
    ('Татьяна Тихонова', '6667788990', '1989-02-25', 'Ростов-на-Дону, ул. Кировская, 8', '321987654321', '321-987-654 00', '2023-02-28'),
    ('Светлана Светлова', '7778899001', '1991-03-05', 'Уфа, ул. 50 лет Победы, 9', '123456789987', '123-456-789 11', '2023-02-15'),
    ('Игорь Игорев', '8889900112', '1987-03-10', 'Казань, ул. Зелёная, 10', '987654321654', '987-654-321 11', '2023-02-20'),

    ('Виктория Викторова', '9990011223', '1994-03-20', 'Ярославль, ул. Гоголя, 11', '543210987654', '543-210-987 00', '2023-03-01'),
    ('Николай Николаев', '0001122334', '1983-04-11', 'Ижевск, ул. Ленина, 12', '321098765432', '321-098-765 00', '2023-03-15'),
    ('Екатерина Егоровна', '1112233445', '1992-05-15', 'Смоленск, ул. Октябрьская, 13', '654321098765', '654-321-098 00', '2023-03-20'),
    ('Анна Андреева', '2223344556', '1989-06-25', 'Тверь, ул. Пушкинская, 14', '987654321012', '987-654-321 00', '2023-03-25'),
    ('Валентин Валентинов', '3334455667', '1980-07-30', 'Астрахань, ул. 40 лет Октября, 15', '321654987012', '321-654-987 00', '2023-03-30'),

    ('Роман Романов', '4445566778', '1990-04-01', 'Тула, ул. Красная, 16', '123456789012', '123-456-789 00', '2023-04-05'),
    ('Кирилл Кириллов', '5556677889', '1984-04-15', 'Волгоград, ул. 8 Марта, 17', '987654321012', '987-654-321 00', '2023-04-12'),
    ('Ирина Иринова', '6667788990', '1992-04-22', 'Саратов, ул. 50 лет Победы, 18', '543216789012', '543-216-789 00', '2023-04-20'),
    ('Сергей Сергеев', '7778899001', '1988-05-01', 'Ульяновск, ул. Ленина, 19', '321987654321', '321-987-654 00', '2023-04-25'),
    ('Оксана Оксанова', '8889900112', '1993-05-12', 'Новосибирск, ул. Чкалова, 20', '123456789987', '123-456-789 11', '2023-04-30'),

    ('Даниил Данилов', '9990011223', '1991-05-02', 'Калуга, ул. Победы, 21', '543210987654', '543-210-987 00', '2023-05-05'),
    ('Виктор Викторов', '0001122334', '1985-05-15', 'Кострома, ул. Ленина, 22', '321098765432', '321-098-765 00', '2023-05-10'),
    ('Алексей Алексеев', '1112233445', '1994-05-25', 'Мурманск, ул. Севера, 23', '654321098765', '654-321-098 00', '2023-05-15'),
    ('Людмила Людмилова', '2223344556', '1987-06-01', 'Сургут, ул. Вокзальная, 24', '987654321012', '987-654-321 00', '2023-05-20'),
    ('Федор Федоров', '3334455667', '1990-06-10', 'Ставрополь, ул. Тихая, 25', '321654987012', '321-654-987 00', '2023-05-25');
